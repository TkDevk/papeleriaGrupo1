<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="css/estilos.css">
    <title></title>
</head>
<body>

 <section id="opciones">
    <div class="caja">
        <img src="img/1.png">
        <p>SET DE LÁPICES X 6 UNIDADES CON ESTUCHE PANDA (SURTIDO)<br>Precio: $20.000</p>
        <button class="add" data-product="PSET DE LÁPICES X 6 UNIDADES CON ESTUCHE PANDA" data-price="20.000">Agregar al carrito</button>      
    </div>
    <div class="caja">
        <img src="img/2.png">
        <p>BLOCk CUADRICULADO CARTA JEAN BOOK 70 HOJAS <br>Precio: $5.700</p>
        <button class="add" data-product="BLOCk CUADRICULADO CARTA JEAN BOOK 70 HOJAS" data-price="5.700">Agregar al carrito</button> 
    </div>
    <div class="caja">
        <img src="img/3.png">
        <p>BOLÍGRAFO CON 2 REPUESTOS, TINTA AZUL KEYROAD (SURTIDO)<br>Precio: $15.000</p>
        <button class="add" data-product="BOLÍGRAFO CON 2 REPUESTOS, TINTA AZUL KEYROAD (SURTIDO)" data-price="15.000">Agregar al carrito</button>
    </div>        
</section><br><br>
<section id="opciones">
    <div class="caja">
        <img src="img/4.png">
        <p>BORRADOR DE NATA PELIKAN X 3 UNIDADES<br>Precio: $4.200<br><br></p>
        <button class="add" data-product="BORRADOR DE NATA PELIKAN X 3 UNIDADES" data-price="4.200">Agregar al carrito</button>
    </div>
    <div class="caja">
        <img src="img/5.png">
        <p>LIBRETA EJECUTIVA DISEÑO DE ROSAS 14 X 9 CM<br>Precio: $25.000<br><br></p>
        <button class="add" data-product="LIBRETA EJECUTIVA DISEÑO DE ROSAS 14 X 9 CM" data-price="25.000">Agregar al carrito</button>
     </div>
    <div class="caja">
        <img src="img/6.jpg">
        <p>RESMA A4 MAGNOVER - Papel importado  de Brasil estilo propalcote<br>Precio: $ 11.000</p>
        <button class="add" data-product="RESMA A4 MAGNOVER - Papel importado  de Brasil estilo propalcote" data-price="11.000">Agregar al carrito</button>
    </div>        
</section>
<div class="carro">
    <h2>CARRITO DE COMPRAS</h2>
    <h3>Detalle de la compra</h3>
    <ul id="carro-producto">
    </ul>
    <p>Total: $<span id="carro-total">0</span></p>
    <button id="confirmarCompra">Confirmar Compra</button>
    <button id="cancelarCompra">Cancelar Compra</button>
    <div id="confirmacionCompra" class="modal">
        <div class="modal-content">
            <p>Compra confirmada. Gracias por tu compra.</p>
            <button id="cerrarConfirmacion">Cerrar</button>
        </div>  
    </div>
    <div id="modal" class="modal">
        <div class="modal-content">
            <p>¿Estás seguro de que deseas cancelar la compra?</p>
            <button id="confirmarCancelacion">Sí</button>
            <button id="cerrarModal">No</button>
        </div>
    </div>
    <div id="cancelacionModal" class="modal">
        <div class="modal-content">
            <p>La compra se ha cancelado.</p>
            <button id="cerrarCancelacion">Cerrar</button>
        </div>
    </div>
</div>



<script>
const addToCartButtons = document.querySelectorAll('.add');
const cartItems = document.getElementById('carro-producto');
const cartTotal = document.getElementById('carro-total');

let cart = [];
let total = 0;

addToCartButtons.forEach(button => {
    button.addEventListener('click', () => {
        const product = button.getAttribute('data-product');
        const price = parseFloat(button.getAttribute('data-price'));

        const existingProduct = cart.find(item => item.product === product);

        if (existingProduct) {
            existingProduct.quantity++;
        } else {
            cart.push({ product, price, quantity: 1 });
        }

        total += price;
        updateCart();
    });
});

function updateCart() {
    cartItems.innerHTML = '';
    cart.forEach(item => {
        const li = document.createElement('li');
        li.textContent = `${item.product} x${item.quantity} - $${(item.price * item.quantity).toFixed(2)}`;

        const removeButton = document.createElement('button');
        removeButton.textContent = 'Quitar';
        removeButton.classList.add('remover');
        removeButton.addEventListener('click', () => {
           
            if (item.quantity > 1) {
                item.quantity--;
                total -= item.price;
            } else {
                cart = cart.filter(cartItem => cartItem.product !== item.product);
                total -= item.price;
            }
            updateCart();
        });

        li.appendChild(removeButton);
        cartItems.appendChild(li);
    });

    cartTotal.textContent = total.toFixed(2);
    
    const confirmacionCompra = document.getElementById('confirmacionCompra');
    const confirmarCompraButton = document.getElementById('confirmarCompra');
    const cerrarConfirmacionButton = document.getElementById('cerrarConfirmacion');
    const modal = document.getElementById('modal');

    confirmarCompraButton.addEventListener('click', () => {
        confirmacionCompra.style.display = 'block';
    });

    cerrarConfirmacionButton.addEventListener('click', () => {
        confirmacionCompra.style.display = 'none';
        cart = [];
        total = 0;
        updateCart();
    });

    const cancelarCompraButton = document.getElementById('cancelarCompra');
    const confirmarCancelacionButton = document.getElementById('confirmarCancelacion');
    const cerrarModalButton = document.getElementById('cerrarModal');
    const cancelacionModal = document.getElementById('cancelacionModal');
    const cerrarCancelacionButton = document.getElementById('cerrarCancelacion');

    cancelarCompraButton.addEventListener('click', () => {
        modal.style.display = 'block';
    });

    confirmarCancelacionButton.addEventListener('click', () => {
        cart = [];
        total = 0;
        updateCart();
        cancelacionModal.style.display = 'block';
    });

    cerrarModalButton.addEventListener('click', () => {
        modal.style.display = 'none';
    });

    cerrarCancelacionButton.addEventListener('click', () => {
        cancelacionModal.style.display = 'none'; 
    });
    }

    </script>
</body>
</html>